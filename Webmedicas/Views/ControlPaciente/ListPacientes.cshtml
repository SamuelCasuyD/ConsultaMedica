@using Webmedicas.Models;
@{
    ViewBag.Title = "ListPacientes";
    int contador = 1;
    IList<PacienteDTO> Cpaciente = (IList<PacienteDTO>)ViewBag.Pacientes;
    //var paciente = (PacienteDTO)Session["DataPaciente"];
    var paciente = (Session["DataPaciente"] == null) ? new PacienteDTO() : (PacienteDTO)Session["DataPaciente"];
}

<div style="font-family: 'Verdana';">
    <div class="row">
        <div class="col-xs-12 ">
            <div class="col-xs-12 col-md-5">
                <h2>Control de Pacientes</h2>
                <ol class="breadcrumb" style="background-color:white">
                    <li><a href="@Url.Action("index", "Home" , new { area="" })">Home</a></li>
                    <li class="active"><strong>Pacientes</strong></li>
                </ol>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row text-center">
            <div class="col-lg-12">
                <div class="panel panel-primary">
                    <div class="panel-heading h4 " style="margin:0px; ">
                        Crear Paciente
                    </div>
                    <div class="panel-body" style="padding-left:0px; padding-right:0px">
                        <div class="col-lg-12">
                            <form action="@Url.Action("CrearControlPaciente", "ControlPaciente")" method="post">
                                <div class="col-lg-6 text-center">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 text-left">Paciente: </label>
                                        <input class="form-control " style="width:100%" type="text" name="NombrePaciente" id="NombrePaciente" value="@paciente.NombrePaciente" required>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-5 text-left" >Fecha de nacimiento: </label>
                                        <input class="form-control" type="date" name="FechaNacimiento" id="FechaNacimiento" value="" placeholder="Fecha de nacimiento" required>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 text-left">Genero: </label>
                                        <input class="form-control " type="text" name="Sexo" id="Sexo" value="@paciente.Sexo" required>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 text-left">DPI: </label>
                                        <input class="form-control " type="text" name="DPI" id="DPI" value="@paciente.DPI" placeholder="Eje: 2052853760101" required>
                                    </div>
                                </div>
                                <div>
                                    <button class="btn btn-primary pull-right" type="submit" id="Crear" name="Crear">
                                        <i class="fa fa-check fa-lg" aria-hidden="true"></i> Crear
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-12">
            <div class="row">
                <div class="btn-toolbar" role="toolbar">
                    <div class="btn-group pull-right">
                        <a class="btn btn-default" type="button" href="@Url.Action("EditarPaciente","ControlPaciente",new { })"> Crear Cita</a>
                        <a class="btn btn-default" href="@Url.Action("EditarPaciente","ControlPaciente",new { })"> Lista de citas</a>
                    </div>
                </div>
            </div>
        </div>

        <hr class="mt-5 mb-5">

        <div class="col-lg-12">
            <div class="ibox float-e-margins tooltip-demo">
                <table class="table table-striped table-hover table-bordered small">
                    <thead>
                        <tr>
                            <th style="text-align:center">#</th>
                            <th>CODIGO</th>
                            <th>PACIENTE</th>
                            <th>GENERO</th>
                            <th>DPI</th>
                            <th>FECHA DE NACIMIENTO</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var c in Cpaciente)
                        {
                            <tr>
                                <td style="text-align:center">@contador</td>
                                <td>@c.IdPaciente</td>
                                <td>@c.NombrePaciente</td>
                                <td>@c.Sexo</td>
                                <td>@c.DPI</td>
                                <td>@c.FechaNacimiento.ToString("dd/MM/yyyy")</td>
                                <td style="text-align:center">
                                    <div class="btn-group">
                                        <a class="btn bg-info btn-xs" href="@Url.Action("EditarPaciente","ControlPaciente",new {  id=c.IdPaciente})"> Editar</a>
                                        <a class="btn bg-success btn-xs" href="@Url.Action("EditarPaciente","ControlPaciente",new {  id=c.IdPaciente})"> Citas</a>
                                        <a class="btn bg-danger btn-xs" href="@Url.Action("InactivarPaciente","ControlPaciente",new {  id=c.IdPaciente})"> Eliminar</a>
                                        <a class="btn btn-default btn-xs" href="@Url.Action("ShowAddAnexo", "ControlPaciente", new { id=c.IdPaciente})" > Agregar</a>
                                    </div>
                                </td>
                            </tr>
                            contador++;
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>